<?php
/**
 * Magedelight
 * Copyright (C) 2019 Magedelight <info@magedelight.com>
 *
 * @category Magedelight
 * @package Magedelight_Sales
 * @copyright Copyright (c) 2019 Mage Delight (http://www.magedelight.com/)
 * @license http://opensource.org/licenses/gpl-3.0.html GNU General Public License,version 3 (GPL-3.0)
 * @author Magedelight <info@magedelight.com>
 */
$creditmemos = $block->getCreditMemoCollection();
?>

<div class="col-md-12 table-wrapper">
    <table class="data table">
        <thead>
        <tr>
            <th scope="col" class="col sortable"><?php echo __('Credit Memo') ?></th>
            <th scope="col" class="col sortable"><?php echo __('Created') ?></th>
            <th scope="col" class="col sortable"><?php echo __('Order') ?></th>
            <th scope="col" class="col sortable"><?php echo __('Order Date') ?></th>
            <th scope="col" class="col sortable"><?php echo __('Status') ?></th>
            <th scope="col" class="col sortable"><?php echo __('Refunded') ?></th>
        </tr>
        </thead>
        <tbody>
        <?php $i = 0;
        if ($creditmemos->count() > 0) {
            foreach ($creditmemos as $creditmemo) {
                $i++; ?>
                <tr>
                    <td class="col data-grid-id-cell">
                        <div class="data-grid-cell-content"><?php echo $creditmemo->getIncrementId(); ?></div>
                    </td>
                    <td class="col data-grid-id-cell">
                        <div class="data-grid-cell-content"><?php echo $creditmemo->getCreatedAt(); ?></div>
                    </td>
                    <td class="col data-grid-id-cell">
                        <div class="data-grid-cell-content"><?php echo $creditmemo->getOrderIncrementId(); ?></div>
                    </td>
                    <td class="col data-grid-id-cell">
                        <div class="data-grid-cell-content"><?php echo $creditmemo->getOrderCreatedAt(); ?></div>
                    </td>
                    <td class="col data-grid-id-cell">
                        <div class="data-grid-cell-content"><?php echo $block->getCreditmemoState($creditmemo->getState()); ?></div>
                    </td>
                    <td class="col data-grid-id-cell">
                        <div class="data-grid-cell-content"><?php echo $creditmemo->getBaseGrandTotal(); ?></div>
                    </td>
                </tr>
            <?php }
        } else { ?>
            <tr>
                <td colspan="8">
                    <div class="message info empty"><span><?php echo __("We couldn't find any records.");?></span></div>
                </td>
            </tr> 
            <?php } ?>
        </tbody>
    </table>
</div>
<?php if ($block->getPagerHtml()): ?>
    <div class="order-products-toolbar toolbar bottom"><?php echo $block->getPagerHtml(); ?></div>
<?php endif ?>

    <script>
    
    require(['jquery','Magedelight_Theme/js/common'], function ($,common) {
        
        // Button click events.
        $('.action.button').click(function (e) {
            common.handleClicks($(this));
            return false;
        });
        // Button click events.
        
        // Link click events.
        $('.action.delete').click(function (e) {
            common.handleClicks($(this));
            return false;
        });
        
        $('.action.edit').click(function (e) {
            common.handleClicks($(this));
            return false;
        });
        // Link click events.
    });
</script>